<!DOCTYPE html>
<html>
<head>
  <meta name=viewport content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <title>Fetch it!</title>
<style type="text/css">
    #editor { 
        position: absolute;
        top: 50%;
        right: 0;
        bottom: 0;
        left: 0;
        height: 50%;
    }
    svg {
      height:100%;
      width:100%;
    }

</style>
</head>
<body>
  <button id="compile">Compile!</button>
  <div id="display"></div>
  <div id="editor">
Hello world.\par
\LaTeX\ shoud be working \emph{fine}.
  </div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/chrome");
    editor.getSession().setMode("ace/mode/latex");
    editor.setOptions({
      readOnly: true,
      fontSize: 30
    });
</script>

<script type="text/javascript">
$('#compile').click(function() {
  console.log("wut");
$.post( 
    // "http://0.0.0.0:5000/svg",
    "https://texrhobot.herokuapp.com/svg",
    {"document": editor.getValue()})
  .done(function(data) {
    var svg = $(data).find("svg");
    $('#display').html(svg);
  })
  .fail(function(err) {
    console.log( err );
  });
});


</script>
</body>
</html>
